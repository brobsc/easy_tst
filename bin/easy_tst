#!/usr/bin/env python
# coding: utf-8

from __future__ import print_function
import sys

from easy_tst import tst_wrapper, easy_config, easy_clipboard


# Collect settings data from the user
def config_wizard():
    name = raw_input('Name: ')
    root = raw_input('Root: ')
    mat = raw_input('Mat: ')
    sub = raw_input('Subdirs? (y/n) ')
    easy_config.store(root, name, mat, sub)


# Collect args from command line
args = sys.argv

# Test if config_wizard already ran and if not run wizard
wizard_ran = False
if easy_config.load()['name'] == 'Test':
    print('Empty settings. Running wizard...')
    wizard_ran = True
    config_wizard()

# Define which mode will run
if len(args) == 1 or args[1] == 'watch':
    easy_clipboard.watch_mode()
elif args[1] == 'wizard' and not wizard_ran:
    config_wizard()
else:
    tst_wrapper.full_checkout(args[1])
